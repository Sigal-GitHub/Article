> 数据库表由多列字段构成，每一个字段指定了不同的数据类型。指定字段的数据类型之后，也就决定了向字段插入的数据内容，例如，当要插入数值的时候，可以将它们存储为整数类型，也可以将它们存储为字符串类型。不同的数据类型也决定了 MySQL 在存储它们的时候使用的方式，以及在使用它们的时候选择什么运算符号进行运算

> 一个字节存储8位无符号数，储存的数值范围为0-255。如同字元一样，字节型态的变数只需要用一个位元组（8位元）的内存空间储存

## 整数类型

`TINYINT SMALLINT MEDIUMINT INT(INTEGER) BIGINT`

![20210116154735](http://pic.sigalx.com/pic/20210116154735.png)

取值范围计算，1字节(8bit)，如：

TINYINT 无符号的最大值：2^8^ - 1(255)

TINYINT 有符号的最大值：2^7^ - 1(127)

![20210116162705](http://pic.sigalx.com/pic/20210116162705.png)

1. 在创建表的时候，使用 int 类型，那 int(11) 后面这个11指的是显示宽度，就是个数，只要存储的数值不超过取值范围，可以存储超过11个的数字，但是显示只显示11个。如果不够11个，就会用空格填充

2. 不单单是 int 其他整数类型也可以在定义表结构时指定所需要的显示宽度，如果不指定，则有默认的宽度值

3. 其他整数类型的默认显示宽度与其有符号数的最小值宽度相同，如 tinyint 取值是-128~127，那默认就是4个显示宽度，因为负号会占一个位置

> 显示宽度只用于显示，并不能限制取值范围和占用空间。例如: INT(3)会占用4字节的
存储空间，并且允许的最大值不会是999，而是INT整型所允许的最大值


## 浮点数据类型和定点数据类型

- 浮点：单精度浮点类型(FLOAT),双精度浮点类型(DOUBLE)

- 定点：DECIMAL

![20210116192320](http://pic.sigalx.com/pic/20210116192320.png)

DECIMAL 类型不同于 FLOAT 和 DOUBLE, DECIMAL 实际是以串存放的，可能的最大取值范围与 DOUBLE 一样，但是其有效的取值范围由 M 和 D 的值决定。如果改变 M 而固定 D，则其取值范围将随 M 的变大而变大

`DECIMAL(M,D)` M 是精度，表示总共的位数；D 表示小数点后面的位数

如：`DECIMAL(6,2)` 的取值范围是`-9999.99 ~ 9999.99`

若只是 `DECIMAL(6)` 则相当于 `DECIMAL(6,0)`

> 不单单是 DECIMAL，FLOAT 和 DOUBLE 都这样表示

DECIMAL 的存储空间并不是固定的，而由其精度值M决定的，占用M+2字节

FLOAT 类型的取值范围如下:

- 有符号的取值范围: -3.402823466E+38 ~ -1.175494351E-38

- 无符号的取值范围: 0 和 1.175494351E-38 ~ 3.402823466E+38

DOUBLE 类型的取值范围如下:

- 有符号的取值范围: -1.797693 1348623157E+308 ~ -2.2250738585072014E-308

- 无符号的取值范围: 0 和 2.2250738585072014E-308 ~ 1.7976931348623157E+308

> 不论是定点数还是浮点数类型，如果用户指定的精度超出精度范围，则会四舍五入

在操作浮点和定点数据类型的时候，浮点类型四舍五入不会发出警告，而定点类型会给出警告

可以 `SHOW WARNINGS;` 查看警告信息

![20210116194029](http://pic.sigalx.com/pic/20210116194029.png)

FLOAT和DOUBLE在不指定精度时，默认会按照实际的精度(由计算机硬件和操作系统决定)

DECIMAL若不指定精度则默认为(10,0)

浮点数相对于定点数的优点是在长度一定的情况下，浮点数能够表示更大的数据范围

它的缺点是会引起精度问题

> 在MySQL中，定点数以字符串形式存储，在对精度要求比较高的时候(如货币、科学数据等)使用DECIMAL的类型比较好，另外两个浮点数进行减法和比较运算时容易出问题，所以在使用浮点数时需要注意，并尽量避免做浮点数比较

## 日期与时间类型

> MySQL 中有多种表示日期的数据类型，主要有 DATETIME、DATE、TIMESTAMP、TIME 和 YEAR。例如，当只记录年信息的时候，可以只使用 YEAR 类型，而没有必要使用 DATE。每一个类型都有合法的取值范围，当指定确实不合法的值时系统将“零”值插入到数据库中

![20210116194514](http://pic.sigalx.com/pic/20210116194514.png)

#### YEAR

YEAR 类型是一个单字节类型，用于表示年，在存储时只需要 1 字节。可以使用各种格式指定 YEAR 值

1. 以 4 位字符串或者 4 位数字格式表示的 YEAR， 范围为 '1901' ~ '2155'。输入格式为 'YYYY' 或者 YYYY。例如，输入'2010' 或 2010，插入到数据库的值均为 2010

2. 以 2 位字符串格式表示的 YEAR， 范围为 '00' 到 '99'。'00' ~ '69' 和 '70' ~ '99'范围的值分别被转换为 2000 ~ 2069 和 1970 ~ 1999 范围的 YEAR 值。'0' 与 '00' 的作用相同。插入超过取值范围的值将被转换成 2000

3. 以 2 位数字表示的 YEAR,范围为 1 ~ 99。1 ~ 69 和 70 ~ 99 范围的值分别被转换为2001 ~ 2069 和 1970 ~ 1999 范围的 YEAR 值。注意:在这里 0 值将被转换为 0000， 而不是2000

> 两位整数范围与两位字符串范围稍有不同。例如:插入 2000 年，读者可能会使用数字格式的 0 表示 YEAR，实际上，插入数据库的值为 0000，而不是所希望的 2000。只有使用字符串格式的'0'或'00'，才可以被正确地解释为2000。非法 YEAR 值将被转换为 0000

#### TIME

TIME 类型用在只需要时间信息的值，在存储时需要 3 字节，格式为'HH:MM:SS’。其中，HH 表示小时，MM 表示分钟，ss 表示秒。TIME类型的取值范围为`-838:59:59 ~ 838:59:59`，小时部分会如此大的原因是 TIME 类型不仅可以用于表示一天的时间(必须小于24小时)，还可能是某个事件过去的时间或两个事件之间的时间间隔(可以大于24小时，或者甚至为负)。可以使用各种格式指定 TIME 值

不合法的值存储的时候会变成00:00:00

注意：↓

![20210116202617](http://pic.sigalx.com/pic/20210116202617.png)

#### DATE

DATE 类型用在仅需要日期值时，没有时间部分，在存储时需要 3 字节。日期格式为；'YYYY-MM-DD'。其中，YYYY 表示年，MM 表示月，DD 表示日。在给 DATE 类型的字段赋值时，可以使用字符串类型或者数字类型的数据插入，只要符合 DATE 的日期格式即可


1. 以'YYYY-MM_DD’或者'YYYYMMDD'字符串格式表示的日期，取值范围为'1000-01-01' ~ '9999-12-3'。例如，输入'2012-12-31'或者'20121231'，插入数据库的日期都为2012-12-31

2. 以 'YY-MM_DD' 或者 'YYMMDD' 字符串格式表示的日期，在这里 YY 表示两位的年值。包含两位年值的日期会令人模糊，因为不知道世纪。MySQL 使用以下规则解释两位年值:'00~69'范围的年值转换为'2000~2069';'70~99' 范围的年值转换为'1970~1999'。例如，输入'12-12-31'，插入数据库的日期为 2012-12-31; 输入'981231' ，插入数据的日期为 1998-12-31

3. 以 YY-MM-DD 或者 YYMMDD 数字格式表示的日期，与前面相似，00~69 范围的年值
转换为 2000~2069, 70~99 范围的年值转换为 1970~1999。 例如，输入 12-12-31 插入数据库的日期为 2012-12-31;输入 981231,插入数据的日期为1998-12-31

4. 使用 CURRENT_DATE 或者 NOW()，插入当前系统日期，CURRENT_DATE 只返回当前日期值，不包括时间部分；NOW() 函数返回日期和时间值，在保存到数据库时，只保留了其日期部分

#### DATETIME

DATETIME 类型用于需要同时包含日期和时间信息的值，在存储时需要 8 字节。日期格式为'YYYY-MM-DD HH:MM:SS'。其中，YYYY 表示年，MM 表示月，DD 表示日，HH 表示小时，MM 表示分钟，SS 表示秒。在给 DATETIME 类型的字段赋值时，可以使用字符串类型或者数字类型的数据插入，只要符合DATETIME的日期格式即可

1. 以‘YYYY-MM-DD HH:MM:SS'或者'YYY YMMDDHHMMSS'字符串格式表示的值，取值范围为‘ 1000-01-01 00:00:00’~ 9999-12-3 23:59:59’。例如，输入2012- 12-31 05: 05: 05'或者‘20121231050505' ，插入数据库的DATETIME值都为2012- 12-31 05: 05: 05

2. 以'YY-MM-DD HH:MM:SS'或者'YYMMDDHHMMSS'字符串格式表示的日期，在这里YY表示两位的年值。与前面相同，'00~69' 范围的年值转换为'2000~2069'，'70~99'范围的年值转换为'1970~1999'。例如,输入'12-12-31 05:05:05',插入数据库的 DATETIME 为 2012-12-31 05:05:05;输入'980505050505'，插入数据库的DATETIME为 1998-05-05 05:05:05

3. 以YYYYMMDDHHMMSS或者YYMMDDHHMMSS数字格式表示的日期和时间。例如，输入20121231050505,插入数据库的DATETIME为2012-12-31 05:05:05;输入981231050505,插入数据的 DATETIME 为1998-12-31 05:05:05


#### TIMESTAMP

TIMESTAMP 的显示格式与 DATETIME 相同，显示宽度固定在 19 个字符，日期格式为 YYYY-MM-DD HH:MM:SS，在存储时需要 4 字节。TIMESTAMP 列的取值范围小于 DATETIME 的取值范围，为'1970-01-01 00:00:01' UTC ~ '2038-01-19 03:14:07' UTC。其中, UTC (Coordinated Universal Time) 为世界标准时间，因此在插入数据时，要保证在合法的取值范围内

> TIMESTAMP 与 DATETIME 除了存储字节和支持的范围不同外，还有一个最大的区别就是: DATETIME 在存储日期数据时，按实际输入的格式存储，即输入什么就存储什么，与时区无关;而 TIMESTAMP 值的存储是以 UTC(世界标准时间) 格式保存的，存储时对当前时区进行转换，检索时再转换回当前时区。查询时，不同时区显示的时间值是不同的


## 文本字符串类型

字符串类型用来存储字符串数据，除了可以存储字符串数据之外，还可以存储其他数据，比如图片和声音的二进制数据。MySQL支持两类字符型数据:文本字符串和二进制字符串。文本字符串可以进行区分或者不区分大小写的串比较,还可以进行模式匹配查找。在MySQL中，文本字符串类型是指 CHAR、VARCHAR、TEXT、ENUM 和 SET

![20210116215900](http://pic.sigalx.com/pic/20210116215900.png)

VARCHAR 和 TEXT 类型都是变长类型，其存储需求取决于列值得实际长度，在上面图表中用 L 来表示

#### CHAR 和 VARCHAR 类型

CHAR(M) 是定长。保存的时候在右侧填充空格，以达到指定的长度。M 表示列长度，M 的范围是 0~255个字符。列如：CHAR(4) 定义了一个固定长度的字符串列，其包含的字符个数最大为 4，当检索到 CHAR 值时，尾部的空格将被删除

VARCHAR(M) 是可变长。M表示最大列长度。M的范围是0~65535。VARCHAR的最大实际长度由最长的行的大小和使用的字符集确定,而其实际占用的空间为字符串的实际长度加1。例如，VARCHAR(50)定义了一个最大长度为50的字符串，如果插入的字符串只有10个字符，则实际存储的字符串为10个字符和一个字符串结束字符。VARCHAR在值保存和检索时尾部的空格仍保留，也就是说，插入一个右侧有空格的字符串，select的时候，空格也会显示出来，而 CHAR 会忽略空格

CHAR(4) 和 VARCHAR(4) 的存储区别：

![20210116224229](http://pic.sigalx.com/pic/20210116224229.png)

> 在上表中，最后一行的值只有在使用“不严格”模式时，字符串才会被截断插入;如果MySQL运行在“严格”模式，超过列长度的值不会被保存，并且会出现错误信息“ERROR1406(22001): Data too long for column”，即字符串长度超过指定长度，无法插入

#### TEXT 类型

TEXT列保存非二进制字符串，如文章内容、评论等。当保存或查询TEXT列的值时，不删除尾部空格

Text类型分为4种: TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT。不同的TEXT类型的存储空间和数据长度不同

1. tinyteXt最大长度为255(28-1)字符的TEXT列

2. TEXT最大长度为65535(2l6-1)字符的TEXT列

3. MEDIUMTEXT最大长度为16777215(224-1)字符的TEXT列

4. LONGTEXT最大长度为4294967295(232-1)或4GB字符的TEXT列

#### ENUM 类型

ENUM是一个字符串对象，其值为表创建时在列规定中枚举的一列值。语法格式如下:

`字段名ENUM('值1', '值2',.... '值n')`

其中，"字段名"指将要定义的字段，"值n"指枚举列表中的第n个值

ENUM 类型的字段在取值时，只能在指定的枚举列表中取，而且一次只能取一个。创建的成员中有空格时，其尾部的空格将自动被删除。ENUM 值在内部用整数表示，并且每个枚举值均有一个索引值：列表值所允许的成员值从1开始编号，MySQL 存储的就是这个索引编号。枚举最多可以有65535个元素。

例如：定义 ENUM 类型的列('first','second','third')，该列可以取的值和每个值得索引如下：

![20210116225335](http://pic.sigalx.com/pic/20210116225335.png)

ENUM 值依照列索引顺序排列，并且空字符串排在非空字符串前，NULL 值排在其他所有的枚举值前。这一点也可以从上表中看到

![20210116225531](http://pic.sigalx.com/pic/20210116225531.png)

> ENUM 列总有一个默认值:如果将 ENUM 列声明为 NULL, NULL 值则为该列的一个有效值，并且默认值为 NULL;如果 ENUM 列被声明为 NOT NULL，其默认值为允许的值列表的第1个元素

#### SET 类型

SET是一个字符串对象，可以有零或多个值。SET列最多可以有64个成员，其值为表创建时规定的一列值。指定包括多个SET成员的SET列值时，各成员之间用逗号(,)间隔开。语法格式如

`SET('值1', '值2'.... '值n')`

与 ENUM 类型相同，SET 值在内部用整数表示，列表中每一个值都有一个索引编号。 当创建表时，SET 成员值的尾部空格将自动被删除

与 ENUM 类型不同的是，ENUM 类型的字段只能从定义的列值中选择一个值插入，而SET类型的列可从定义的列值中选择多个字符的联合

如果插入SET字段中列值有重复，则 MySQL 自动删除重复的值

插入SET字段的值的顺序:并不重要，MySQL会在存入数据库时按照定义的顺序显示

如果插入了不正确的值,默认情况下，MySQL将忽视这些值，并给出警告

> 对 SET 来说，如果插入得值重复了，则只取一个，例如插入"a,b,a"，则结果为"a,b"，如果插入了不按顺序排列得值，则自动按顺序插入，例如插入"c,a,d"，结果"a,c,d"；如果插入了不正确的值，那么该值会被阻止插入

## 二进制字符串类型

MySQL 中的二进制数据类型有 BIT、 BINARY、VARBINARY、 TINYBLOB、BLOB、
MEDIUMBLOB 和 LONGBLOB

![20210116230303](http://pic.sigalx.com/pic/20210116230303.png)

#### BIT 类型

BIT 类型是位字段类型。M 表示每个值的位数，范围为1~64。如果 M 被省略，默认为1。

如果为 BIT(M) 列分配的值的长度小于 M 位，就在值的左边用0填充。例如，为BIT(6)列分配一个值 b'10'， 其效果与分配 b'000101' 相同

BIT 数据类型用来保存位字段值。例如，以二进制的形式保存数据13(13的二进制形式为1101)，在这里需要位数至少为4位的BIT类型，即可以定义列类型为BIT(4)，大于二进制1111的数据是不能插入BIT(4)类型的字段中的

#### BINARY 和 VARBINARY 类型

BINARY 和 VARBINARY 类型类似 CHAR 和 VARCHAR，不同的是它们包含二进制字节字符串

`列名称 BINARY(M) 或 VARBINARY(M)`

BINARY类型的长度是固定的，指定长度之后，不足最大长度的，将在它们右边填充'\0'补齐以达到指定长度

例如:指定列数据类型为BINARY(3),当插入'a'时, 存储的内容实际为"a\0\0",当插入"ab"时，实际存储的内容为"ab\0"，不管存储的内容是否达到指定的长度，其存储空间均为指定的值 M

VARBINARY类型的长度是可变的，指定好长度之后，其长度可以在0到最大值之间。例如:指定列数据类型为VARBINARY(20)， 如果插入的值的长度只有10， 则实际存储空间为10加1,即实际占用的空间为字符串的实际长度加1

#### BLOB 类型

BLOB 是一个二进制大对象，用来存储可变数量的数据。BLOB类型分为4种: TINYBLOB、 BLOB、MEDIUMBLOB 和 LONGBLOB，它们可容纳值的最大长度不同，如下表

![20210117010633](http://pic.sigalx.com/pic/20210117010633.png)

BLOB 列存储的是二进制字符串(字节字符串)，TEXT 列存储的是非二进制字符串(字符字符串)。BLOB 列没有字符集，并且排序和比较基于列值字节的数值: TEXT 列有一个字符集，并且根据字符集对值进行排序和比较
