### 正则表达式

- 正则表达式就是描述字符串排列模式的一种自定义语法规则
- 如果可以使用字符串处理函数完成，就不要使用正则
- 有一些复杂性的操作，只能用正则表达式
- 正则表达式也称为一种模式表达式
- 正则表达式就是通过构建具有特定规则的模式，在与输入的字符串信息进行比较，分割，匹配，查找和替换等功能

特点：

- 正则表达式也是一个字符串
- 由具有特殊意义的字符组成的字符串
- 具有一定的编写规则，也是一种模式
- 看作是一种编程语言，因为是用一些特殊的字符，按照规则编写出一个字符串，形成一种模式-正则表达式
- 如果正则表达式不和函数一起使用，则它就是一个普通的字符串，如果将正则表达式放到某个函数中使用，才能发挥其作用

### PHP 提供操作正则表达式的两种函数库

1. posix 扩展正则表达式；ereg 开头的
2. perl 兼容正则表达式；preg 开头的

> 两个功能是一样的，但是 perl 的效率会更高一些，推荐使用 perl

### 正则表达式的语法

##### 定界符

定界符就是用来声明表达式边界的符号，正则表达式是字符串类型

常用‘/’，实际上字母和非数字字符以及‘\’之外的字符都可以做定界符

一个完整的定界符有两个，第一个是字符串类型的引号定界符，一个是正则的定界符，如`'/***/'`

##### 原子

组成正则表达式的最小单位就是原子

有哪些组成？

- 所有可见字符都是原子
- 大部分不可见字符也是原子，如空格，\n,\r,\t
- \d 数字0-9之间任意一个字符
- \D 除数字0-9之外的任意内容
- \s 表示匹配空白字符，空格,\n,\r,\t
- \S 表示匹配除空白以外的任意一个字符
- \w 表示匹配数字，大小写字母以及下划线中的任意一个字符
- \W 表示匹配除了数字，大小写字母以及下划线中的任意一个字符
- [] 原子列表
    - 表示在指定的字符中选取一个原子
    - [5-9] 表示5，6，7，8，9连续字符，允许缩写为开始字符-结束字符
- [^] 排除列表
    - [^abc] 表示除了 abc 之外的所有字符都可以使用

##### 元字符（原子修饰符）

- 原子数量修饰符
    - + 表示前面的原子出现一次或者多次 {1,}
    - ? 表示前面的原子出现0次或者1次 {0,1}
    - * 表示前面的原子出现0次1次或者多次 {0,}
    - {m,n} 表示前面的原子出现最少m次，最多n次
    - {m} 表示前面的原子出现指定的m次
    - {m,} 表示前面的原子最少出现m次以上
    - . 可以匹配任意一个原子，除了\n之外

- 词边界修饰符
- 什么是词边界
    - 可以分割一个单词的字符都是词边界，包括空格，标签符号，特殊字符，字符串的开始和结束，每一行的结束部分
    - 不可以当作词边界的部分就是数字，字母和_
    - \b 表示词边界
    - \B 表示非词边界

- 字符串边界修饰符（也就是开始和结束）
    - ^ 表示以指定的字符开头的内容
    - $ 表示以指定的字符结尾的内容
    - ^字符串$ 表示精确匹配某个字符串，多一个少一个都不行
    - 如果要使用^ $可以匹配每一行的开始和结束部分，需要使用模式修正符m视为多行处理

- 选择修饰符 |
    - a|b  含a或者b字符

- 模式单元()
    - 改变优先级
    - 将多个原子视为一个原子，目的是为了使用原子数量修饰符
    - 将匹配到括号的内容暂时存为内存中
    - 如果使用()仅仅是为了模拟一个原子使用原子数量修饰符，那么可以在括号的开始处使用 ?: 来解除存于内存的作用，提高效率
    - 可以将括号的内容在函数的辅助下进行反向引用操作

##### 模式修正符

- i 忽略大小写
- x 忽略正则中的空白
- s 使.元字符可以匹配到\n
- m 视为多行处理，在该模式下^和$可以匹配\n
- S 加速匹配
- U 改变贪婪模式
    - 程序默认是贪婪模式，匹配最远的结束位置，我们可以在正则中使用.*?匹配任意字符的同时使用非贪婪模式

### 正则表达式的函数

- preg_grep() 返回与模式匹配的数组单元（一维数组）
- preg_match()
- preg_match_all()
- preg_split()
- preg_replace(): 可以是字符串也可以是数组


手机号：/^1[3-9][0-9]{9}$/sSU
身份证：/^[1-9]\d{5} ((19)|(20))\d{2} (0|1)\d [0-3]\d [0-9]{3}[0-9x]$/xsSU
            地址          年            月       日       识别码